==================
OpenSPP User Roles
==================

..
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:8bca708161ce1efdfcdd063102286ec448fb0937413c2d8e4b68b7c57ba585d7
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: LGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OpenSPP%2Fopenspp--modules-lightgray.png?logo=github
    :target: https://github.com/OpenSPP/openspp-modules/tree/17.0/spp_user_roles
    :alt: OpenSPP/openspp-modules

|badge1| |badge2| |badge3|

OpenSPP User Roles
==================

Overview
--------

The `spp_user_roles <spp_user_roles.md>`__ module enhances the user role
management capabilities of OpenSPP, providing a more granular and
context-aware approach to user permissions. It builds upon the base user
role system in Odoo and introduces the concept of "local" roles,
allowing administrators to assign permissions based on specific
geographical areas.

Purpose
-------

This module aims to:

-  **Define Local Roles:** Introduce the concept of roles that are
   specific to a particular geographical area (e.g., Center Area).
-  **Restrict User Access:** Limit the access of users with local roles
   to data and operations within their assigned areas.
-  **Enhance Data Security:** Improve data security by ensuring that
   users can only view and modify information relevant to their assigned
   locations.

Dependencies and Integration
----------------------------

1. **G2P Registry: Base
   (**\ `g2p_registry_base <g2p_registry_base.md>`__\ **):** This module
   indirectly depends on the ``res.partner`` model from the G2P
   Registry: Base module, as it modifies the access rules for registrant
   data based on a user's assigned areas.

2. **G2P Registry: Group
   (**\ `g2p_registry_group <g2p_registry_group.md>`__\ **):** Similar
   to the Base module, it impacts access to group registrant data based
   on area assignments.

4. **OpenSPP Area (**\ `spp_area <spp_area.md>`__\ **):** The module
   heavily relies on the area hierarchy defined in the
   `spp_area <spp_area.md>`__ module. Local roles are directly
   associated with specific areas, and user access is restricted
   accordingly.

5. **OpenSPP ID Queue (**\ `spp_idqueue <spp_idqueue.md>`__\ **):**
   Integrates with the ID Queue module to control access to ID card
   requests and batches based on area assignments, ensuring that users
   only manage requests originating from their designated locations.

6. **Base User Role (base_user_role):** Extends the base Odoo module for
   user role management, inheriting its core functionalities and adding
   the area-based restrictions.

Additional Functionality
------------------------

-  **Role Type (role_type):**

   -  Adds a new field to the ``res.users.role`` model to distinguish
      between "global" roles (with system-wide access) and "local" roles
      (restricted to specific areas).

-  **Local Area (local_area_id):**

   -  Introduces a field in the ``res.users.role.line`` model to
      associate local roles with specific areas.
   -  This field is only visible and editable for roles marked as
      "local."

-  **Center Area IDs (center_area_ids):**

   -  Adds a computed field to the ``res.users`` model to store the
      areas assigned to a user through their local roles.

-  **Area-Based Data Filtering:**

   -  Modifies the search methods for models like ``res.partner`` to
      automatically include area-based filters when accessed by users
      with local roles.
   -  Ensures that users only see data relevant to their assigned areas.

-  **API Integration:**

   -  Integrates with the OpenSPP API to enforce area-based access
      control for API requests.
   -  API responses for users with local roles are automatically
      filtered to include only data within their authorized locations.

Conclusion
----------

The `spp_user_roles <spp_user_roles>`__ module significantly enhances
the security and granularity of user permissions in OpenSPP. By
introducing local roles and area-based access control, it ensures that
users can only access and manage information within their designated
geographical areas. This is particularly crucial for large-scale
programs with decentralized operations, where different teams or
individuals are responsible for specific regions.

**Table of contents**

.. contents::
   :local:

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OpenSPP/openspp-modules/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OpenSPP/openspp-modules/issues/new?body=module:%20spp_user_roles%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* OpenSPP.org

Maintainers
-----------

.. |maintainer-jeremi| image:: https://github.com/jeremi.png?size=40px
    :target: https://github.com/jeremi
    :alt: jeremi
.. |maintainer-gonzalesedwin1123| image:: https://github.com/gonzalesedwin1123.png?size=40px
    :target: https://github.com/gonzalesedwin1123
    :alt: gonzalesedwin1123

Current maintainers:

|maintainer-jeremi| |maintainer-gonzalesedwin1123|

This module is part of the `OpenSPP/openspp-modules <https://github.com/OpenSPP/openspp-modules/tree/17.0/spp_user_roles>`_ project on GitHub.

You are welcome to contribute.
