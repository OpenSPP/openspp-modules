<odoo noupdate="0">
    <record model="ir.module.category" id="spp_change_request_module">
        <field name="name">Change Request Module Access</field>
        <field name="description">User access level for the OpenSPP change request module</field>
        <field name="sequence">4</field>
    </record>

    <record id="group_spp_change_request_agent" model="res.groups">
        <field name="name">Change Request Agent</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
    </record>

    <record id="group_spp_change_request_validator" model="res.groups">
        <field name="name">Change Request Validator</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
    </record>

    <record id="group_spp_change_request_applicator" model="res.groups">
        <field name="name">Change Request Applicator</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
    </record>

    <record id="group_spp_change_request_administrator" model="res.groups">
        <field name="name">Change Request Administrator</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
    </record>

    <record id="group_spp_change_request_hq_validator" model="res.groups">
        <field name="name">Change Request Validator HQ</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
    </record>

    <record id="group_spp_change_request_local_validator" model="res.groups">
        <field name="name">Change Request Validator Local</field>
        <field name="category_id" ref="spp_change_request.spp_change_request_module" />
        <field
            name="implied_ids"
            eval="[(4, ref('spp_change_request.group_spp_change_request_validator'))]"
        />
    </record>

    <record id="allow_edit_rule" model="ir.rule">
        <field name="name">Only requested user or assigned to user can Edit</field>
        <field name="model_id" ref="model_spp_change_request" />
        <field name="perm_read" eval="False" />
        <field name="perm_write" eval="True" />
        <field name="perm_unlink" eval="False" />
        <field name="perm_create" eval="False" />
        <!-- Logical Representation: (('state', '=', 'draft') & (('create_uid', '=', user.id) | ('assign_to_id', '=', user.id))) | ('state', '!=', 'draft') -->
        <field
            name="domain_force"
        >['|', '&amp;', ('state', '=', 'draft'), '|', ('create_uid', '=', user.id), ('assign_to_id', '=', user.id), ('state', '!=', 'draft')]</field>
    </record>

</odoo>
