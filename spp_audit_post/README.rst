========================
G2P Registry: Audit Post
========================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:e9a2f5af077faf1076b3d985c964ed9f4f67830140e9238bbb87cb6312cfb124
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Production%2FStable-green.png
    :target: https://odoo-community.org/page/development-status
    :alt: Production/Stable
.. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
    :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
    :alt: License: LGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OpenSPP%2Fopenspp--modules-lightgray.png?logo=github
    :target: https://github.com/OpenSPP/openspp-modules/tree/17.0/spp_audit_post
    :alt: OpenSPP/openspp-modules

|badge1| |badge2| |badge3|

OpenSPP Audit Post
==================

This document outlines the **G2P Registry: Audit Post** module within
the OpenSPP platform. This module extends the functionality of the audit
log by enabling the posting of audit log messages to related parent
records.

Purpose
-------

The module's primary goal is to provide a comprehensive overview of
changes not just within a single record, but also across related records
in a parent-child relationship. By posting audit log information to
parent records, it offers a centralized view of how modifications
cascade through interconnected data.

Module Integration and Dependencies
-----------------------------------

-  `spp_audit_log <spp_audit_log>`__: This module directly depends on
   the audit log module. It leverages the existing audit log framework
   to capture and display change information.
-  **Mail (mail)**: The module utilizes the standard Odoo Mail module to
   post audit log messages as messages on parent records. This
   integration ensures that relevant stakeholders are notified about
   changes impacting related data.

Additional Functionality
------------------------

1. **Parent-Child Rule Association**:

   -  Allows users to define parent-child relationships between audit
      rules.
   -  When an audit rule has a parent rule, changes logged by the child
      rule are also posted to the parent record.

2. **Field-Level Linking**:

   -  Enables users to specify the relational field that connects the
      child model to the parent model within the audit rule
      configuration.
   -  Ensures that the audit log messages are posted to the correct
      parent records based on the defined relationship.

3. **Enhanced Audit Log Model
   (**\ `spp.audit.log <spp.audit.log>`__\ **)**:

   -  Introduces new fields to store information about the parent
      record:

      -  **parent_model_id:** Stores the model ID of the parent record.
      -  **parent_res_ids_str:** Stores a comma-separated string of IDs
         representing the parent records.
      -  **parent_data_html:** Provides a formatted HTML representation
         of the changes made to the child record, intended for display
         on the parent record's message thread.

4. **Automated Message Posting**:

   -  When a change is audited and a parent rule is defined, the module
      automatically generates a message on the parent record's message
      thread.
   -  The message includes detailed information about the change,
      including the model, field, old value, and new value, presented in
      a user-friendly HTML format.

Conclusion
----------

The **G2P Registry: Audit Post** module enhances data transparency and
traceability within OpenSPP by extending audit logging to encompass
related records. This functionality provides valuable insights into how
modifications propagate through the system, facilitating better data
management and analysis. This is particularly beneficial in complex data
structures where understanding the impact of changes across related
records is crucial.

**Table of contents**

.. contents::
   :local:

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OpenSPP/openspp-modules/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OpenSPP/openspp-modules/issues/new?body=module:%20spp_audit_post%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* OpenSPP.org

Maintainers
-----------

.. |maintainer-jeremi| image:: https://github.com/jeremi.png?size=40px
    :target: https://github.com/jeremi
    :alt: jeremi
.. |maintainer-gonzalesedwin1123| image:: https://github.com/gonzalesedwin1123.png?size=40px
    :target: https://github.com/gonzalesedwin1123
    :alt: gonzalesedwin1123
.. |maintainer-reichie020212| image:: https://github.com/reichie020212.png?size=40px
    :target: https://github.com/reichie020212
    :alt: reichie020212

Current maintainers:

|maintainer-jeremi| |maintainer-gonzalesedwin1123| |maintainer-reichie020212| 

This module is part of the `OpenSPP/openspp-modules <https://github.com/OpenSPP/openspp-modules/tree/17.0/spp_audit_post>`_ project on GitHub.

You are welcome to contribute.
